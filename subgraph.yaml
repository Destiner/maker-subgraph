specVersion: 0.0.2
schema:
  file: ./schema.graphql
dataSources:
  - kind: ethereum/contract
    name: ProxyFactory
    network: mainnet
    source:
      address: "0xA26e15C895EFc0616177B7c1e7270A4C7D51C997"
      abi: ProxyFactory
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.3
      language: wasm/assemblyscript
      entities:
        - User
        - Proxy
      eventHandlers:
        - event: Created(indexed address,indexed address,address,address)
          handler: handleCreated
      abis:
        - name: ProxyFactory
          file: ./abis/factory.json
      file: ./src/factory.ts
  - kind: ethereum/contract
    name: Pot
    network: mainnet
    source:
      address: "0x197E90f9FAD81970bA7976f33CbD77088E5D7cf7"
      abi: Pot
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.3
      language: wasm/assemblyscript
      entities:
        - Pot
        - User
        - Proxy
      callHandlers:
        - function: file(bytes32,uint256)
          handler: handleFile
        - function: drip()
          handler: handleDrip
        - function: join(uint256)
          handler: handleJoin
        - function: exit(uint256)
          handler: handleExit
      abis:
        - name: Pot
          file: ./abis/pot.json
      file: ./src/pot.ts
  - kind: ethereum/contract
    name: Jug
    network: mainnet
    source:
      address: "0x19c0976f590D67707E62397C87829d896Dc0f1F1"
      abi: Jug
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.3
      language: wasm/assemblyscript
      entities:
        - Jug
      callHandlers:
        - function: file(bytes32,bytes32,uint256)
          handler: handleDutyFile
        - function: file(bytes32,uint256) 
          handler: handleBaseFile
      abis:
        - name: Jug
          file: ./abis/jug.json
      file: ./src/jug.ts
  - kind: ethereum/contract
    name: Spotter
    network: mainnet
    source:
      address: "0x65C79fcB50Ca1594B025960e539eD7A9a6D434A3"
      abi: Spotter
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.3
      language: wasm/assemblyscript
      entities:
        - Spotter
      callHandlers:
        - function: file(bytes32,bytes32,uint256)
          handler: handleFile
      abis:
        - name: Spotter
          file: ./abis/spotter.json
      file: ./src/spotter.ts
  - kind: ethereum/contract
    name: Chai
    network: mainnet
    source:
      address: "0x06AF07097C9Eeb7fD685c692751D5C66dB49c215"
      abi: Chai
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.3
      language: wasm/assemblyscript
      entities:
        - User
      eventHandlers:
        - event: Transfer(indexed address,indexed address,uint256)
          handler: handleTransfer
      abis:
        - name: Chai
          file: ./abis/chai.json
      file: ./src/chai.ts
